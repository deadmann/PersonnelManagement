/*C12*/SET SCHEMA PUBLIC
alter table building_works drop constraint FKl6bh1kkjsubpp6om98yiejx09
alter table building_works drop constraint FK2mry3s4pwkhj4ifev1ttladu
alter table person drop constraint FK4i8om42npv2vi0wm6xut2djxr
alter table person_works drop constraint FK8xby9vbbpxrwt7w60x2dr28jo
alter table person_works drop constraint FKthiolechiqn1es2arjhvelnav
alter table position_personnel drop constraint FKabkxfigmmw790u36gwb1ov60s
alter table position_personnel drop constraint FKs348g4p0scmlwp456hu5gixw
alter table position_wages drop constraint FKpowgor4gjua4pknifdwgat4gh
alter table position_wages drop constraint FKb1280byn8a6av4qiaje03ncr2
alter table wage drop constraint FK43tv7i7rudh7onfp7qj5x4l0a
alter table work drop constraint FKftn0borxbgjnbd28ohuf9nbed
alter table work drop constraint FKmwnxlplhsq3j4kyipvbku7mwi
drop table building if exists
drop table building_works if exists
drop table person if exists
drop table person_works if exists
drop table position if exists
drop table position_personnel if exists
drop table position_wages if exists
drop table wage if exists
drop table work if exists
create table building (id integer generated by default as identity (start with 1), name varchar(50) not null, primary key (id))
create table building_works (building_id integer not null, works_id bigint not null)
create table person (id integer generated by default as identity (start with 1), firstname varchar(50) not null, lastname varchar(50), position_id integer, primary key (id))
create table person_works (person_id integer not null, works_id bigint not null)
create table position (id integer generated by default as identity (start with 1), title varchar(50) not null, primary key (id))
create table position_personnel (position_id integer not null, personnel_id integer not null)
create table position_wages (position_id integer not null, wages_id integer not null)
create table wage (id integer generated by default as identity (start with 1), price double, start_date timestamp not null, position_id integer, primary key (id))
create table work (id bigint generated by default as identity (start with 1), date timestamp, work_per_day integer not null, building_id integer, person_id integer, primary key (id))
alter table building_works add constraint UK_odif54domwa6td7gym6d59j8c unique (works_id)
alter table person_works add constraint UK_pcjoduuin7kc188wmukbgg758 unique (works_id)
alter table position_personnel add constraint UK_ox0yoqajhlie9oc61lxl18bbg unique (personnel_id)
alter table position_wages add constraint UK_friqamhea3j5ohr2cjw25wrku unique (wages_id)
alter table building_works add constraint FKl6bh1kkjsubpp6om98yiejx09 foreign key (works_id) references work
alter table building_works add constraint FK2mry3s4pwkhj4ifev1ttladu foreign key (building_id) references building
alter table person add constraint FK4i8om42npv2vi0wm6xut2djxr foreign key (position_id) references position
alter table person_works add constraint FK8xby9vbbpxrwt7w60x2dr28jo foreign key (works_id) references work
alter table person_works add constraint FKthiolechiqn1es2arjhvelnav foreign key (person_id) references person
alter table position_personnel add constraint FKabkxfigmmw790u36gwb1ov60s foreign key (personnel_id) references person
alter table position_personnel add constraint FKs348g4p0scmlwp456hu5gixw foreign key (position_id) references position
alter table position_wages add constraint FKpowgor4gjua4pknifdwgat4gh foreign key (wages_id) references wage
alter table position_wages add constraint FKb1280byn8a6av4qiaje03ncr2 foreign key (position_id) references position
alter table wage add constraint FK43tv7i7rudh7onfp7qj5x4l0a foreign key (position_id) references position
alter table work add constraint FKftn0borxbgjnbd28ohuf9nbed foreign key (building_id) references building
alter table work add constraint FKmwnxlplhsq3j4kyipvbku7mwi foreign key (person_id) references person
INSERT INTO BUILDING VALUES(1,'Azarbaijani')
INSERT INTO BUILDING VALUES(2,'Dadgostari')
COMMIT
INSERT INTO POSITION VALUES(1,'Mohandes')
INSERT INTO POSITION VALUES(2,'Kargar')
COMMIT
INSERT INTO WAGE VALUES(1,1000.0E0,'2016-11-20 00:00:00.000000',2)
INSERT INTO WAGE VALUES(2,1200.0E0,'2016-11-20 00:00:00.000000',1)
COMMIT
INSERT INTO PERSON VALUES(1,'Moradi','Ali',1)
INSERT INTO PERSON VALUES(2,'Aghai',NULL,2)
COMMIT
